<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://www.konstellation.io/docs/kre/30_user/50_krt_v2/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>KRT V2 | Konstellation</title><meta property="og:title" content="KRT V2"><meta property="og:description" content="Understading how the new version V2 of KRT works"><meta property="og:type" content="website"><meta property="og:url" content="https://www.konstellation.io/docs/kre/30_user/50_krt_v2/"><meta property="og:site_name" content="Konstellation"><meta itemprop=name content="KRT V2"><meta itemprop=description content="Understading how the new version V2 of KRT works"><meta name=twitter:card content="summary"><meta name=twitter:title content="KRT V2"><meta name=twitter:description content="Understading how the new version V2 of KRT works"><link rel=preload href=/scss/main.min.33e67b67522abab078f32f1ef9432f9311c52c0a0aed6a9c7f75fedcb53af9be.css as=style><link href=/scss/main.min.33e67b67522abab078f32f1ef9432f9311c52c0a0aed6a9c7f75fedcb53af9be.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="30" height="30" viewBox="0 0 30 30" id="svg9" sodipodi:docname="logo.svg" inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"><defs id="defs13"/><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1602" inkscape:window-height="871" id="namedview11" showgrid="false" inkscape:zoom="19.666667" inkscape:cx="25.549767" inkscape:cy="15.135206" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="0" inkscape:current-layer="svg9"/><title id="title2">4135B303-CB0F-43C8-8C8F-225E46D3A3E3</title><g id="DS-Style-Guide" style="fill:none;fill-rule:evenodd;stroke:none;stroke-width:1" transform="matrix(0.41143082,0,0,0.41706694,-4.8865756,-5.012913)"><g id="DS-/-Style-Guide-/-Brand" transform="translate(-1323,-629)" style="fill:#e3e3e3"><g id="Atoms-/-Brand-/-Isotype-/-isotype-B-light" transform="translate(1323,629)"><g id="Atoms-/-Brand-/-Isotype-v4" transform="translate(17.361702,18.382979)"><path d="M39.392034.33851303C52.047353 4.0838212 61.27663 15.737809 61.27663 29.538647c0 16.82579-13.717447 30.466173-30.638298 30.466173C13.71714 60.00482 3.4042553e-5 46.364437 3.4042553e-5 29.538647 3.4042553e-5 15.737809 9.2293106 4.0838212 21.884289.33851303v0V9.5893971C14.155609 12.947446 8.7537362 20.615105 8.7537362 29.538647c0 12.018567 9.7981278 21.76131 21.8845958 21.76131 12.086468.0 21.884255-9.742743 21.884255-21.76131.0-8.923542-5.401532-16.591201-13.130553-19.9492499v0zM30.638332 20.833852c4.834383.0 8.753702 3.897301 8.753702 8.704863.0 4.807223-3.919319 8.704524-8.753702 8.704524-4.834724.0-8.754043-3.897301-8.754043-8.704524.0-4.807562 3.919319-8.704863 8.754043-8.704863z" id="Combined-Shape" inkscape:connector-curvature="0"/></g></g></g></g></svg></span><span class="text-uppercase font-weight-bold">Konstellation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Home</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Home</a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">KAI Server</a></li><ul><li class="collapse show" id=docskre><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/10_getting_started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=docskre10_getting_started><a class="td-sidebar-link td-sidebar-link__page" id=m-docskre10_getting_startedcore_concepts href=/docs/kre/10_getting_started/core_concepts/>Core concepts</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docskre10_getting_startedinstall_local href=/docs/kre/10_getting_started/install_local/>Run KAI Server</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/20_operator/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Operator documentation</a></li><ul><li class=collapse id=docskre20_operator><a class="td-sidebar-link td-sidebar-link__page" id=m-docskre20_operatorkais_architecture href=/docs/kre/20_operator/kais_architecture/>KAI Server Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docskre20_operatorinstallation href=/docs/kre/20_operator/installation/>Install KAI Server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docskre20_operatorcustomization href=/docs/kre/20_operator/customization/>Customization</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">User documentation</a></li><ul><li class="collapse show" id=docskre30_user><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/10_intro/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Intro</a></li><ul><li class=collapse id=docskre30_user10_intro></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/20_runtimes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Runtimes</a></li><ul><li class=collapse id=docskre30_user20_runtimes></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/30_versions/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Versions</a></li><ul><li class=collapse id=docskre30_user30_versions><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/30_versions/versions_krt_v1/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Versions in KRT V1</a></li><ul><li class=collapse id=docskre30_user30_versionsversions_krt_v1></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/30_versions/versions_krt_v2/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Versions in KRT V2</a></li><ul><li class=collapse id=docskre30_user30_versionsversions_krt_v2></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/40_krt/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KRT</a></li><ul><li class=collapse id=docskre30_user40_krt><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/40_krt/specs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KRT YAML specs</a></li><ul><li class=collapse id=docskre30_user40_krtspecs></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/50_krt_v2/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">KRT V2</a></li><ul><li class="collapse show" id=docskre30_user50_krt_v2><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/50_krt_v2/specs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">KRT V2 YAML specs</a></li><ul><li class="collapse show" id=docskre30_user50_krt_v2specs></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/60_kais_runner_sdk/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KAI Server Runner SDK</a></li><ul><li class=collapse id=docskre30_user60_kais_runner_sdk><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/60_kais_runner_sdk/sdk_krt_v1/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDK for KRT v1</a></li><ul><li class=collapse id=docskre30_user60_kais_runner_sdksdk_krt_v1><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/60_kais_runner_sdk/sdk_krt_v1/features_krt_v1/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Runner features</a></li><ul><li class=collapse id=docskre30_user60_kais_runner_sdksdk_krt_v1features_krt_v1></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/60_kais_runner_sdk/sdk_krt_v2/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SDK for KRT v2</a></li><ul><li class=collapse id=docskre30_user60_kais_runner_sdksdk_krt_v2><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/60_kais_runner_sdk/sdk_krt_v2/features_krt_v2/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Runner features</a></li><ul><li class=collapse id=docskre30_user60_kais_runner_sdksdk_krt_v2features_krt_v2></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/30_user/70_observavility/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a></li><ul><li class=collapse id=docskre30_user70_observavility></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/40_demo/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Demo</a></li><ul><li class=collapse id=docskre40_demo></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/kre/50_begginers_guide/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Begginers guide</a></li><ul><li class=collapse id=docskre50_begginers_guide></li></ul></ul></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/konstellation-io/website/edit/master/content/en/docs/KRE/30_user/50_krt_v2/_index.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/konstellation-io/website/issues/new?title=KRT%20V2" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a></div><nav id=TableOfContents><ul><li><a href=#branched-workflows>Branched workflows</a></li><li><a href=#architecture-diagram-defined-by-a-krt-v2>Architecture diagram defined by a KRT V2</a></li><li><a href=#reactive-approach>Reactive approach</a><ul><li><a href=#multiple-responses>Multiple responses</a></li><li><a href=#filter-messages>Filter messages</a></li></ul></li><li><a href=#exitpoint>Exitpoint</a></li><li><a href=#krt-yaml-file>KRT YAML file</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.konstellation.io/docs/>Home</a></li><li class=breadcrumb-item><a href=https://www.konstellation.io/docs/kre/>KAI Server</a></li><li class=breadcrumb-item><a href=https://www.konstellation.io/docs/kre/30_user/>User documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.konstellation.io/docs/kre/30_user/50_krt_v2/>KRT V2</a></li></ol></nav><div class=td-content><h1>KRT V2</h1><div class=lead>Understading how the new version V2 of KRT works</div><ul><li><a href=#branched-workflows>Branched workflows</a></li><li><a href=#reactive-approach>Reactive approach</a></li><li><a href=#exitpoint>Exitpoint</a></li><li><a href=#krt-yaml-file>KRT YAML File</a></li><li><a href=#architecture-diagram-defined-by-a-krt-v2>Architecture diagram defined by a KRT V2</a></li></ul><h2 id=branched-workflows>Branched workflows</h2><p>The main purpose of KRT V2 is to bring branched workflows on board. This means nodes are now capable
of subscribing to several other nodes at the same time, thus workflows are now capable of branching out.</p><p>It is advised to previously read and fully understand <a href=../40_krt>KRT</a> before moving on to V2, as this
page focuses on explaining V2 related changes and new concepts.</p><h2 id=architecture-diagram-defined-by-a-krt-v2>Architecture diagram defined by a KRT V2</h2><p>Here is an example of an architecture defined by a KRT V2 file, this example is taken from our KRT V2 demo repo:</p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:1210px><img class=card-img-top src=/docs/kre/30_user/50_krt_v2/diagram_krt_v2_hu236d25e355e33a17d7bfd58081f1bff7_100144_1200x0_resize_catmullrom_2.png width=1200 height=522></div><h2 id=reactive-approach>Reactive approach</h2><p>Nodes will publish their results onto their own subject, is up to other nodes whether to subscribe
and process its messages or not. This allows for organic growth as nodes can be developed then hooked
up to other nodes freely.</p><h3 id=multiple-responses>Multiple responses</h3><p>Nodes now don&rsquo;t necessarily have to return a response, they can publish several to none messages to their topics.
Thus, instead of returning the message to be published, messages will be published using the function
<em>SendOutput</em> provided by the context.</p><h3 id=filter-messages>Filter messages</h3><p>Nodes can choose which subtopic from their own subject they publish to. At the same time, they can
choose to take messages from any subtopic of another node. This allows users to filter out messages
and reduce stress on nodes.</p><p>Nodes can subscribe to one or more subtopics from another node and to various nodes at the same time.
To help with filtering, users can set up which <em>handlers</em> are to be executed depending on the request&rsquo;s origin.
Take into consideration nodes can only discern the node from which the request proceeds,
not the subtopic or topic. For setup guidance consult
<a href=/docs/kre/30_user/60_kais_runner_sdk/>Runner SDK</a>.</p><h2 id=exitpoint>Exitpoint</h2><p>The exitpoint is a user defined node and can take up any name, however it has to be later assigned
in the krt.yaml file to the exitpoint attribute. Users can only define one exitpoint as this is the
final node to which the entrypoint will subscribe.</p><p>An exitpoint is required in all workflows. As the exitpoint is the only node that will communicate
back to the entrypoint, it is recommended to handle merge strategies in it.</p><p>Also, if users wish to implement &ldquo;early exit&rdquo; and &ldquo;early reply&rdquo; strategies, they should subscribe
the exitpoint to nodes emitting these types of messages.</p><h2 id=krt-yaml-file>KRT YAML file</h2><p>The KRT YAML file serves the same purpose as its predecessor. However, now nodes are declared and
defined inside the workflows, an exitpoint must be described per workflow and a <em>v2</em> tag must be
added to the <em>krtVersion</em> field.</p><p>Users must define subscriptions in the node&rsquo;s definition. The names s in the subscriptions list must
match the declared node&rsquo;s names. <em>&lsquo;entrypoint&rsquo;</em> is the reserved name for the entrypoint KRE provides.
In order for a node to subscribe to the entrypoint just type the reserved name in its subscriptions.</p><p>Learn about the fields in the <a href=/docs/kre/30_user/50_krt_v2/specs/>KRT YAML specs</a>.</p><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/docs/kre/30_user/50_krt_v2/specs/>KRT V2 YAML specs</a></h5><p>YAML Definition of a KRT file.</p></div></div><div class="text-muted mt-5 pt-3 border-top">Last modified February 2, 2023: <a href=https://github.com/konstellation-io/website/commit/aa0d1d7f035243e4316172cdab1cab76415a65a1>feat: Add documentation for krt v2 (#37) (aa0d1d7)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/konstellation-io/kre><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Konstellation Authors All Rights Reserved</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.a34f6fe6e1caad9ee74f246a8f19857e3b99c2008bc2813ea4940235123bbc5e.js integrity="sha256-o09v5uHKrZ7nTyRqjxmFfjuZwgCLwoE+pJQCNRI7vF4=" crossorigin=anonymous></script></body></html>