<!doctype html><html lang=v2 class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.74.3"><meta name=ROBOTS content="NOINDEX, NOFOLLOW"><link rel=alternate type=application/rss+xml href=https://www.konstellation.io/v2/docs/60_kais_runner_sdk/index.xml><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>KAI Server Runner SDK | Konstellation</title><meta property="og:title" content="KAI Server Runner SDK"><meta property="og:description" content="Code your nodes on top of the KAI Server Runner SDK"><meta property="og:type" content="website"><meta property="og:url" content="https://www.konstellation.io/v2/docs/60_kais_runner_sdk/"><meta property="og:site_name" content="Konstellation"><meta itemprop=name content="KAI Server Runner SDK"><meta itemprop=description content="Code your nodes on top of the KAI Server Runner SDK"><meta name=twitter:card content="summary"><meta name=twitter:title content="KAI Server Runner SDK"><meta name=twitter:description content="Code your nodes on top of the KAI Server Runner SDK"><link rel=preload href=/scss/main.min.33e67b67522abab078f32f1ef9432f9311c52c0a0aed6a9c7f75fedcb53af9be.css as=style><link href=/scss/main.min.33e67b67522abab078f32f1ef9432f9311c52c0a0aed6a9c7f75fedcb53af9be.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/v2/><span class=navbar-logo><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="30" height="30" viewBox="0 0 30 30" id="svg9" sodipodi:docname="logo.svg" inkscape:version="0.92.5 (2060ec1f9f, 2020-04-08)"><defs id="defs13"/><sodipodi:namedview pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" objecttolerance="10" gridtolerance="10" guidetolerance="10" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-width="1602" inkscape:window-height="871" id="namedview11" showgrid="false" inkscape:zoom="19.666667" inkscape:cx="25.549767" inkscape:cy="15.135206" inkscape:window-x="0" inkscape:window-y="27" inkscape:window-maximized="0" inkscape:current-layer="svg9"/><title id="title2">4135B303-CB0F-43C8-8C8F-225E46D3A3E3</title><g id="DS-Style-Guide" style="fill:none;fill-rule:evenodd;stroke:none;stroke-width:1" transform="matrix(0.41143082,0,0,0.41706694,-4.8865756,-5.012913)"><g id="DS-/-Style-Guide-/-Brand" transform="translate(-1323,-629)" style="fill:#e3e3e3"><g id="Atoms-/-Brand-/-Isotype-/-isotype-B-light" transform="translate(1323,629)"><g id="Atoms-/-Brand-/-Isotype-v4" transform="translate(17.361702,18.382979)"><path d="M39.392034.33851303C52.047353 4.0838212 61.27663 15.737809 61.27663 29.538647c0 16.82579-13.717447 30.466173-30.638298 30.466173C13.71714 60.00482 3.4042553e-5 46.364437 3.4042553e-5 29.538647 3.4042553e-5 15.737809 9.2293106 4.0838212 21.884289.33851303v0V9.5893971C14.155609 12.947446 8.7537362 20.615105 8.7537362 29.538647c0 12.018567 9.7981278 21.76131 21.8845958 21.76131 12.086468.0 21.884255-9.742743 21.884255-21.76131.0-8.923542-5.401532-16.591201-13.130553-19.9492499v0zM30.638332 20.833852c4.834383.0 8.753702 3.897301 8.753702 8.704863.0 4.807223-3.919319 8.704524-8.753702 8.704524-4.834724.0-8.754043-3.897301-8.754043-8.704524.0-4.807562 3.919319-8.704863 8.754043-8.704863z" id="Combined-Shape" inkscape:connector-curvature="0"/></g></g></g></g></svg></span><span class="text-uppercase font-weight-bold">Konstellation</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v2/installation/><span>Installation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v2/docs/><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v2/template/><span>Template</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v2/demo/><span>Demo</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>V2</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/60_kais_runner_sdk/>V1</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>V2</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/60_kais_runner_sdk/>V1</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=v2docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/10_getting_started/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a></li><ul><li class=collapse id=v2docs10_getting_started></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/20_architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Architectures</a></li><ul><li class=collapse id=v2docs20_architecture><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/20_architecture/10_kre_architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KAI Server Architecture</a></li><ul><li class=collapse id=v2docs20_architecture10_kre_architecture></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/20_architecture/20_runner_architecture/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Version Archiceture</a></li><ul><li class=collapse id=v2docs20_architecture20_runner_architecture></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/30_runtimes/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Runtimes</a></li><ul><li class=collapse id=v2docs30_runtimes></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/40_versions/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Versions</a></li><ul><li class=collapse id=v2docs40_versions><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/40_versions/versions_krt_v2/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Versions in KRT V2</a></li><ul><li class=collapse id=v2docs40_versionsversions_krt_v2></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/50_krt_v2/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KRT V2</a></li><ul><li class=collapse id=v2docs50_krt_v2><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/50_krt_v2/specs/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KRT V2 YAML specs</a></li><ul><li class=collapse id=v2docs50_krt_v2specs></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/60_kais_runner_sdk/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">KAI Server Runner SDK</a></li><ul><li class="collapse show" id=v2docs60_kais_runner_sdk><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/60_kais_runner_sdk/10_sdk/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">SDK for KRT v2</a></li><ul><li class="collapse show" id=v2docs60_kais_runner_sdk10_sdk></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/60_kais_runner_sdk/20_features/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Runner features</a></li><ul><li class="collapse show" id=v2docs60_kais_runner_sdk20_features></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/v2/docs/70_observavility/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Observability</a></li><ul><li class=collapse id=v2docs70_observavility></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/konstellation-io/website/edit/master/content/v2/docs/60_kais_runner_sdk/_index.md target=_blank><i class="fa fa-edit fa-fw"></i></a><a href="https://github.com/konstellation-io/website/issues/new?title=KAI%20Server%20Runner%20SDK" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=https://github.com/konstellation-io/kre/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i></a></div><nav id=TableOfContents><ul><li><a href=#the-runner-sdk>The Runner SDK</a></li><li><a href=#compatibility-table>Compatibility table</a></li><li><a href=#context>Context</a><ul><li><a href=#database>Database</a></li><li><a href=#logger>Logger</a></li><li><a href=#measurements>Measurements</a></li><li><a href=#predictions>Predictions</a></li><li><a href=#object-store>Object Store</a></li><li><a href=#configuration>Configuration</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.konstellation.io/v2/docs/>Documentation</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.konstellation.io/v2/docs/60_kais_runner_sdk/>KAI Server Runner SDK</a></li></ol></nav><div class=td-content><h1>KAI Server Runner SDK</h1><div class=lead>Code your nodes on top of the KAI Server Runner SDK</div><h2 id=the-runner-sdk>The Runner SDK</h2><p>KAI Server provides an SDK that allows users to receive, process and send messages between nodes.
As well as store metrics, predictions or other kinds of data desired by the user.</p><p>Currently, KAI Server only supports <em>Python</em> and <em>Golang</em> code.</p><p>Thanks to the SDK, users can implement <code>handler</code> and <code>init</code> functions, needed for the correct
functionality of nodes. These functions are implemented in different manners depending on the
<em>KRT version</em> being used. Refer to <a href=../40_krt>KRT v1</a> and <a href=../40_krt_v2>KRT v2</a> for more information.</p><p><em>KAI Server version</em>, <em>KRT version</em> and <em>runner version</em> are dependent of each other but only
compatible in certain manners.
Runner features and implementation differ between the KRT version you are aiming for.
Please refer to <a href=./sdk_krt_v1>SDK KRT v1</a> and <a href=./sdk_krt_v2>SDK KRT v2</a> for more information.</p><p>However, the <em>context</em> object is common to all versions and will be explained here.</p><p>Here is a table depicting compatibility between versions:</p><h2 id=compatibility-table>Compatibility table</h2><table><thead><tr><th>KRT Version</th><th>KRE version</th><th>Entrypoint version</th><th>Golang runner version</th><th>Python runner version</th></tr></thead><tbody><tr><td>V1</td><td>v1 to v7</td><td>1.x.x and 2.x.x</td><td>1.x.x and 2.x.x</td><td>1.x.x and 2.x.x</td></tr><tr><td>V2</td><td>v8</td><td>3.x.x</td><td>3.x.x and 4.x.x</td><td>3.x.x</td></tr></tbody></table><p>It is recommended to use the latest available version when developing your codebase.
You can find published versions at the <a href=https://hub.docker.com/u/konstellation>Konstellation registry</a>.</p><h2 id=context>Context</h2><p>The context object provides a set of utilities that can be used for different purposes on <code>init</code> and <code>handler</code> functions:</p><ul><li><p><strong>In-Memory Storage</strong>: A volatile variable storage that will be available from start until the
version is stopped or restarted. You can set a value with a key name and retrieve it later by that key.</p></li><li><p><strong>Logging</strong>: Functions to register any message or error with different log levels: <code>debug, info, warning, error</code>.</p></li><li><p><strong>Data Persistence</strong>: A way to persist and/or retrieve data from a DB.</p></li><li><p><strong>Measurements</strong>: An easy way to save any amount of arbitrary measurements you need to use later on an Influx graph.</p></li><li><p><strong>Metrics</strong>: Allows you to save predicted and real data in order to feed the pre-generated charts on the &ldquo;Metrics&rdquo; menu for each version.</p></li><li><p><strong>Object Store</strong>: A way to share data between nodes.</p></li><li><p><strong>Configuration</strong>: A centralized configuration repository.</p></li></ul><h3 id=database>Database</h3><p>During any part of your workflows you may need to persist data or recover previously saved data from a database.
In those cases you can use the following functions of the context&rsquo;s DB attribute:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang>    <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Find</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>colName</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>query</span> <span style=color:#000>QueryData</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>res</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#204a87;font-weight:700>error</span>
    <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Save</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>colName</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>data</span> <span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span> <span style=color:#204a87;font-weight:700>error</span>

    <span style=color:#8f5902;font-style:italic>// QueryData is the following type:
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#204a87;font-weight:700>type</span> <span style=color:#000>QueryData</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}</span>
</code></pre></div><p>This functions will store on query data on a MongoDB database, so the data inserted should have a
BSON compatible structure.
Each runtime has its respective database whose name is <code>&lt;runtime-id>-data</code>.</p><h3 id=logger>Logger</h3><p>You can use four log levels that will be shown on the Admin UI page for the Version it belongs.
The SDK will take care of saving the timestamp and tag each log with metadata to help locate the
source of the error.</p><p>These are the available levels and their variants for multiple parameters:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>    <span style=color:#000>ctx</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Logger</span><span style=color:#000;font-weight:700>.</span>

        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Debug</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Info</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Warn</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Error</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>msg</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span>

        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Debugf</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Infof</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Warnf</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
        <span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>Errorf</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>format</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>a</span> <span style=color:#ce5c00;font-weight:700>...</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{})</span>
</code></pre></div><h3 id=measurements>Measurements</h3><p>Metrics can be stored in the runtime&rsquo;s influx bucket anytime.
In order to do so you can use the function <code>save</code> from the <code>Measurement</code>. To use this function you
will have to declare previously tags and fields for your desired point, as if you were creating an influx point.
The <code>save</code> function will take as parameters first the collection name you desire to write to,
then a dictionary of fields and a dictionary of tags.</p><p>By default, this function will attach to the saved tags to every metric the following tags:</p><ul><li>&ldquo;version&rdquo;: the version name to which this node belongs</li><li>&ldquo;workflow&rdquo;: the workflow name to which this node belongs</li><li>&ldquo;node&rdquo;: the node&rsquo;s name</li></ul><p>It is advised to document yourself about influxDB metrics before using this function.</p><p>Here is an example in Go:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#204a87;font-weight:700>func</span> <span style=color:#000>saveMetrics</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>ctx</span> <span style=color:#ce5c00;font-weight:700>*</span><span style=color:#000>kre</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>HandlerContext</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>component</span> <span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>tags</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>{}</span>

  <span style=color:#000>fields</span> <span style=color:#ce5c00;font-weight:700>:=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
    <span style=color:#4e9a06>&#34;requested_component&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#000>component</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000;font-weight:700>}</span>

  <span style=color:#8f5902;font-style:italic>// influx is accessible via the ctx.Measurement variable
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>ctx</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Measurement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Save</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;requests&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>fields</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tags</span><span style=color:#000;font-weight:700>)</span>

  <span style=color:#000>fields</span> <span style=color:#000;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>]</span><span style=color:#204a87;font-weight:700>interface</span><span style=color:#000;font-weight:700>{}{</span>
    <span style=color:#4e9a06>&#34;called_node&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#34;etl&#34;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000;font-weight:700>}</span>

  <span style=color:#000>ctx</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Measurement</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Save</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;number_of_calls&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>fields</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>tags</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000;font-weight:700>}</span>
</code></pre></div><h3 id=predictions>Predictions</h3><p>To help to analyze and visualize the reliability of a model, prediction&rsquo;s data can be stored through
the <code>save</code> function given by the <em>prediction</em> attribute of the context. This function receives a
timestamp, the predicted value as string, and the real value as string. This data is stored in a
MongoDB database named <code>&lt;runtime-id>-data</code>.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>    <span style=color:#000>ctx</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Prediction</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Save</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>time</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>Now</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#4e9a06>&#34;test-predicted-value&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;test-true-value&#34;</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h3 id=object-store>Object Store</h3><p>The object store allows users to upload large files, and it can be defined with
project or workflow scope. <strong>Project scope</strong> makes the object store accessible from
all workflows, while <strong>workflow scope</strong> makes it accessible only from the workflow
nodes.</p><p>The creation of object stores is managed from the <em>krt.yaml</em> file. Through the
context, users will be able to save, get and delete objects. The object store is
ephemeral and, therefore, the persistence of the objects is ensured only during
the execution in which they were created.</p><p>Through the context, users will be able to save, get and delete objects.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Save object</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>object_store</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>save</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>bytes</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>large_file</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;utf-8&#34;</span><span style=color:#000;font-weight:700>))</span>

<span style=color:#8f5902;font-style:italic># Get object</span>
<span style=color:#204a87>object</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>object_store</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Delete object</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>object_store</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h3 id=configuration>Configuration</h3><p>Through configuration, users can store parameters in a key-value format for use
elsewhere in the code. There are three configuration scopes, the <strong>project scope</strong>,
which is shared by all workflows in the project; the <strong>workflow scope</strong>, which is
shared by all workflow nodes; and the <strong>node scope</strong>, which is only accessible
from the node itself.</p><p>Through the context, users will be able to set, get and delete configuration.</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#8f5902;font-style:italic># Set configuration without a scope, by default the scope will be set to &#34;node&#34;</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Set configuration from scope (scope should be &#34;project&#34;, &#34;workflow&#34; or &#34;node&#34;)</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>set</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>value</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>scope</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Get configuration without scope.</span>
<span style=color:#8f5902;font-style:italic># By default, it reads from the most specific scope to the least specific:</span>
<span style=color:#8f5902;font-style:italic># &#34;node&#34; scope, then &#34;workflow&#34; scope, and finally &#34;project&#34; scope.</span>
<span style=color:#8f5902;font-style:italic># If the configuration exists in multiple scopes, it will be overwritten</span>
<span style=color:#8f5902;font-style:italic># in the order mentioned above.</span>
<span style=color:#204a87>object</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Get configuration from scope (scope should be &#34;project&#34;, &#34;workflow&#34; or &#34;node&#34;)</span>
<span style=color:#204a87>object</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>scope</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Delete configuration without scope, by default the scope will be set to &#34;node&#34;</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#8f5902;font-style:italic># Get configuration from scope (scope should be &#34;project&#34;, &#34;workflow&#34; or &#34;node&#34;)</span>
<span style=color:#000>await</span> <span style=color:#000>ctx</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>configuration</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>delete</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>key</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>scope</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><div class=section-index><hr class=panel-line><div class=entry><h5><a href=/v2/docs/60_kais_runner_sdk/10_sdk/>SDK for KRT v2</a></h5><p>SDK specifications for runners compatible with KRT v2</p></div><div class=entry><h5><a href=/v2/docs/60_kais_runner_sdk/20_features/>Runner features</a></h5><p>Features available to runners compatible with KRT V2</p></div></div><div class="text-muted mt-5 pt-3 border-top">April 18, 2023: <a href=https://github.com/konstellation-io/website/commit/8f0290684ce134b6378d95acb7ce04a9c6d073d2>fix: update code example to fix typo (#46) (8f02906)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank href=https://github.com/konstellation-io/kre><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The Konstellation Authors</small></div></div></div></footer></div><script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.a34f6fe6e1caad9ee74f246a8f19857e3b99c2008bc2813ea4940235123bbc5e.js integrity="sha256-o09v5uHKrZ7nTyRqjxmFfjuZwgCLwoE+pJQCNRI7vF4=" crossorigin=anonymous></script></body></html>